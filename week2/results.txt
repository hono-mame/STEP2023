calculate_hash() is too slow.....

calculate_hash2()
0 0.103034
1 0.105122
2 0.062159
3 0.155032
4 0.062839
5 0.063951
6 0.078014
7 0.270107
8 0.065485
9 0.088814
10 0.067612
11 0.069243
12 0.070101
13 0.130668
14 0.645267
15 0.070934
16 0.071850
17 0.071797
18 0.072719
19 0.170547
20 0.074609
21 0.075924
22 0.077377
23 0.077629
24 0.228209
25 0.080014
26 0.080445
27 0.081739
28 1.459994
29 0.079101
30 0.080407
31 0.081407
32 0.240149
33 0.082230
34 0.083729
35 0.084006
36 0.085423
37 0.086822
38 0.087338
39 0.088588
40 0.373854
41 0.090453
42 0.091556
43 0.092362
44 0.093058
45 0.094327
46 0.095047
47 0.096160
48 0.097455
49 0.097845
50 0.498424
51 0.100018
52 0.100680
53 0.101711
54 0.103237
55 0.103807
56 3.100832
57 0.095869
58 0.096358
59 0.097492
60 0.098822
61 0.099757
62 0.100832
63 0.102459
64 0.104221
65 0.103999
66 0.105355
67 0.105148
68 0.526745
69 0.108307
70 0.108395
71 0.110464
72 0.110981
73 0.111712
74 0.113484
75 0.113640
76 0.114852
77 0.116151
78 0.117134
79 0.118549
80 0.119405
81 0.120148
82 0.121935
83 0.122187
84 0.124520
85 0.851986
86 0.124638
87 0.126324
88 0.127097
89 0.128145
90 0.129165
91 0.130082
92 0.130629
93 0.131413
94 0.133246
95 0.133246
96 0.135062
97 0.138217
98 0.136259
99 0.137708

calculate_hash3()
0 0.051867
1 0.054452
2 0.034432
3 0.082250
4 0.034635
5 0.035213
6 0.044210
7 0.142643
8 0.035383
9 0.047506
10 0.035920
11 0.036553
12 0.036679
13 0.063513
14 0.311791
15 0.058731
16 0.036158
17 0.035949
18 0.036169
19 0.076289
20 0.035995
21 0.036458
22 0.037241
23 0.036889
24 0.092715
25 0.036657
26 0.037119
27 0.037403
28 0.723871
29 0.036429
30 0.036817
31 0.037194
32 0.037689
33 0.036220
34 0.113540
35 0.035904
36 0.036440
37 0.036679
38 0.036495
39 0.036884
40 0.036859
41 0.036847
42 0.142717
43 0.036386
44 0.036988
45 0.037410
46 0.037124
47 0.037471
48 0.037569
49 0.037314
50 0.037786
51 0.037734
52 0.180737
53 0.037479
54 0.037569
55 0.037777
56 1.549841
57 0.036921
58 0.037153
59 0.037031
60 0.037648
61 0.037217
62 0.037082
63 0.037583
64 0.037279
65 0.037643
66 0.037028
67 0.036478
68 0.036988
69 0.036685
70 0.036849
71 0.037054
72 0.036985
73 0.036965
74 0.037286
75 0.036958
76 0.225697
77 0.036632
78 0.036728
79 0.037026
80 0.037497
81 0.037101
82 0.037788
83 0.037496
84 0.037402
85 0.037843
86 0.037386
87 0.037541
88 0.037828
89 0.037497
90 0.037722
91 0.037941
92 0.037885
93 0.301188
94 0.037508
95 0.037828
96 0.038123
97 0.037822
98 0.037772
99 0.038087